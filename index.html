<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 TWIoT 高效能監測系統</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div id="countdown-timer" class="countdown-timer"></div>

    <div id="modal" class="modal" style="display:block;">
        <button class="close-btn" id="modal-close-btn">進入系統 ×</button>
        <canvas id="fireworks-canvas"></canvas>
        <div class="happy-new-year">
            <div class="brand-text">TWIoT PM2.5</div>
            <div class="year-text">2026</div>
            <div class="wish-text">Happy New Year</div>
        </div>
    </div>
    
    <div id="map"></div>

    <div class="map-overlay-legend">
        <h4>PM2.5 指標</h4>
        <div class="legend-item"><span class="dot green"></span> 良好 (0-35)</div>
        <div class="legend-item"><span class="dot yellow"></span> 普通 (36-75)</div>
        <div class="legend-item"><span class="dot orange"></span> 不良 (76-150)</div>
        <div class="legend-item"><span class="dot red"></span> 危害 (151+)</div>
        <div class="legend-item"><span class="dot gray"></span> 異常/維修</div>
    </div>

    <div id="dashboard">
        <div id="side-clock" class="side-clock">載入時間...</div>
        <h2>數據控制台</h2>
        
        <div class="control-group">
            <label>縣市快速篩選</label>
            <select id="city-select"><option value="所有">連線中...</option></select>
        </div>

        <div class="btn-row">
            <button id="locate-btn" class="btn-blue-outline">📍 我的位置</button>
            <button id="refresh-now-btn" class="btn-gray">⚡ 更新</button>
        </div>

        <div class="btn-row" style="margin-top:10px;">
            <button id="auto-update-btn" class="btn-green">🔄 自動更新：關</button>
            <button id="show-chart" class="btn-blue">📊 統計分析</button>
        </div>
        
        <hr>
        <div id="station-status-summary" style="font-weight:bold; color:#007bff;">系統啟動中...</div>
        <div id="station-info-list" class="station-list"></div>

        <div id="chart-container">
            <div id="chart-close">✖ 關閉</div>
            <h3 style="text-align:center;">品質分佈對數圖</h3>
            <div style="height: 300px;"><canvas id="station-chart"></canvas></div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="scripts.js"></script>
</body>
</html>